<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Semtech SX1280 2.4ghz LoRa Ranging Tranceivers | StuartsProjects</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Semtech SX1280 2.4ghz LoRa Ranging Tranceivers" />
<meta name="author" content="Stuart" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The Semtech SX1280 LoRa devices bring long range LoRa technology to the 2.4ghz bands. The devices allow for much higher data throughput than the lower frequency LoRa devices, data transfer speeds are up to 203kbps." />
<meta property="og:description" content="The Semtech SX1280 LoRa devices bring long range LoRa technology to the 2.4ghz bands. The devices allow for much higher data throughput than the lower frequency LoRa devices, data transfer speeds are up to 203kbps." />
<link rel="canonical" href="http://localhost:4000/2019/04/26/semtech-sx1280-2-4ghz-lora-ranging-tranceivers-2.html" />
<meta property="og:url" content="http://localhost:4000/2019/04/26/semtech-sx1280-2-4ghz-lora-ranging-tranceivers-2.html" />
<meta property="og:site_name" content="StuartsProjects" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-26T00:00:00+01:00" />
<script type="application/ld+json">
{"url":"http://localhost:4000/2019/04/26/semtech-sx1280-2-4ghz-lora-ranging-tranceivers-2.html","author":{"@type":"Person","name":"Stuart"},"headline":"Semtech SX1280 2.4ghz LoRa Ranging Tranceivers","dateModified":"2019-04-26T00:00:00+01:00","datePublished":"2019-04-26T00:00:00+01:00","description":"The Semtech SX1280 LoRa devices bring long range LoRa technology to the 2.4ghz bands. The devices allow for much higher data throughput than the lower frequency LoRa devices, data transfer speeds are up to 203kbps.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/2019/04/26/semtech-sx1280-2-4ghz-lora-ranging-tranceivers-2.html"},"@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="StuartsProjects" />
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">StuartsProjects</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/Contact.html">Contact</a><a class="page-link" href="/Products.html">Products</a><a class="page-link" href="/WhatisLora.html">What Is LoRa ?</a><a class="page-link" href="/about.html">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Semtech SX1280 2.4ghz LoRa Ranging Tranceivers</h1>
    <p class="post-meta"><time class="dt-published" datetime="2019-04-26T00:00:00+01:00" itemprop="datePublished">
        Apr 26, 2019
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>The Semtech SX1280 LoRa devices bring long range LoRa technology to the 2.4ghz bands. The devices allow for much higher data throughput than the lower frequency LoRa devices, data transfer speeds are up to 203kbps.</p>

<p>The SX1280 also has a ranging mode that can measure distance by recording the time of flight of a special packet exchange between two SX1280s.</p>

<p>I have designed some plug in Mikrobus boards for the Ebyte and G-NiceRF SX1280 LoRa devices. The larger green PCBs are an ATMega328P based Mini Logger I also designed. It can be fitted with a single plug in Mikrobus compatible board, see the picture below;</p>

<p><img src="/images/Arduinos2-1024x993.jpg" alt="" /></p>

<p>The Mikrobus PCBs shown, the yellow ones, are breadboard friendly so will plug into a standard 0.1” breadboard, very useful for prototyping.</p>

<p>A complete Arduino based transceiver fitted with an G-NiceRF SX1280 device is shown on the left of the picture above, complete with 2dBi WiFi antenna. The board was programmed in the Arduino IDE.</p>

<p>Semtech publish sample code for the SX1280 but its not directly suitable for the Arduino environment so I used the Semtech code as a basis for writing some Arduino library files.</p>

<h2 id="first-ranging-tests"><strong>First Ranging tests</strong></h2>

<p>I used a large open field to test the ranging, these were the results;.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Actual Distance   Indicated Distance.
0                 4.4M 
50M               57.6M 
100M              103M 
150M              148M 
200M              201M 
250M              253M
</code></pre></div></div>

<p>So not too bad, the results did seem to be consistent for large open areas. So short distance ranging seems OK, what about longer distances ?</p>

<h2 id="44km-ranging-test"><strong>4.4km Ranging test</strong></h2>

<p>North of the Cardiff where I live there is a ridge and the location is around 150M higher than where my shed is located in the city. With a SX1280 transceiver on top of the 6M mast attached to my shed there is a relatively clear line of sight from the ridge to the device on the mast, the distance is 4.4km.</p>

<p><img src="/images/word-image-9-1024x768.jpeg" alt="" /></p>

<p>I wrote ranging software that would first transmit a ranging request at high power (10dBm!) and report whether the ranging request completed. The transmit power was then reduced and another ranging request made.</p>

<p>Over the 4.4km link the ranging worked down to -14dBm. Thus if the full power was used, 10dBm, this test indicates the ranging may have potential to work at over 69km.</p>

<h2 id="40km-ranging-test">40km Ranging Test</h2>

<p>There is a location North of Cardiff (altitude 264m) suitable for a 40km link test to Black Down (altitude 325m) in the Mendips, the other side of the Bristol channel.</p>

<p><img src="/images/word-image-10-300x199.jpeg" alt="" /></p>

<p>At the Cardiff end there was a SX1280 ranging receiver fixed to a pole and another for a basic link test. The view from here towards the Mendips is below;</p>

<p><img src="/images/word-image-11-300x225.jpeg" alt="" /></p>

<p>At the Mendips end I had a matching set of devices, one as the ranging test instigator/transmitter and another for receiving basic link test packets. The results were logged to a micro SD card for later analysis. Basic 2dBi antennas were used at both ends.</p>

<p>At the Mendips end the ranging request transmitter would emit a long beep at the start of the test sequence, send a ranging request at 10dBm, then 9dBm, 8dBm etc. If the ranging request was successful then the would be a short beep. Thus to work out the power level when the ranging stopped working you only had to listen for the long beep and then count the short beeps.</p>

<p>The LoRa settings for the ranging were SF10 and bandwidth 406khz, the longest range settings that the SX1280 allows for ranging mode.</p>

<h2 id="ranging-calculations"><strong>Ranging calculations</strong></h2>

<p>The path used for the ‘4.4km Ranging test’ mentioned above was used to test and calibrate the ranging function. The ground distance was 4.42km as measured on Google maps. The average ranging result from the SX1280 was 24515. This gave a conversion factor to metres of 0.1803.</p>

<p>The average ranging result for the Cardiff to Mendips link was 225982. Applying the 0.1803 conversion factor gives a distance of <strong>40.745km</strong>. The distance taken from Google Maps was <strong>40.650km</strong>. So the SX1280 ranging produced a measurement of +0.2% over actual. Not bad.</p>

<h2 id="summary---distance-potential-of-the-sx1280-ranging-and-point-to-point"><strong>Summary - Distance Potential of the SX1280 ranging and point to point.</strong></h2>

<p>The ranging requests were received down to 4dBm over the 40km link. This would imply a potential range of <strong>80km</strong> LOS at 10dBm. Even modestly improved antennas at both ends (see antenna comparisons above) could double this range.</p>

<p>The longest range settings for point to point mode, SF12 and bandwidth 203khz should have a link advantage of 8dBm over the ranging settings described above, SF10 and bandwidth 406khz. Converting this 8dBm link advantage over the ranging settings, suggests a potential range for point to point LoRa in the <strong>200km</strong> region.</p>

<h2 id="sx1280-program-code"><strong>SX1280 Program Code</strong></h2>

<p>Semtech publish source code in C++ and a development kit for the SX1280 based on ARM\MBED. I have adapted the code to work under the Arduino IDE, its been tested on ATMega328P and ATMega1284P. There is still some work to do on the ranging part of this code, when it it ready it is my intention to publish it as an Arduino library.</p>

<p>All the parts used in these tests were self funded, no complimentary parts were used.</p>

  </div><a class="u-url" href="/2019/04/26/semtech-sx1280-2-4ghz-lora-ranging-tranceivers-2.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          
        </ul>
      </div>
      <div class="footer-col">
        <p>Adventures with Semtech LoRa devices</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"></ul>
</div>

  </div>

</footer>
</body>

</html>
